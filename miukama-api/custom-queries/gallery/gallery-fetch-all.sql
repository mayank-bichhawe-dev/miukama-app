SELECT "Gallery"."id", "Gallery"."name",CONCAT("User"."firstName", ' ', "User"."lastName") AS "ownerName", "Gallery"."description", COALESCE("ProductCountUnderCategories"."galleryCount", 0) as "galleryCount", "Gallery"."userId", "Gallery"."visibility", "Gallery"."imagePath","Gallery"."fileSystemId","Gallery"."updatedAt", "User"."id" as "userId", "User"."firstName", "User"."lastName", "User"."email", "User"."fileSystemId" as "userFileSystemId", "User"."imagePath" as "userImagePath" FROM "Galleries" AS "Gallery" JOIN "Users" AS "User" ON "Gallery"."userId" = "User"."id" AND ("User"."deletedAt" IS NULL) LEFT JOIN (SELECT "galleryId", COUNT("productCategoryCount") AS "galleryCount" FROM "Categories" JOIN (SELECT "categoryId", COUNT(ID) AS "productCategoryCount" FROM "Products" WHERE "deletedAt" ISNULL GROUP BY "categoryId") "Products" ON ("Categories"."id" = "Products"."categoryId") WHERE "deletedAt" ISNULL GROUP BY "galleryId") "ProductCountUnderCategories" ON ("ProductCountUnderCategories"."galleryId" = "Gallery"."id") WHERE "Gallery"."deletedAt" IS NULL
